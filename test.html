<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Grid Layout with Filters</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 90%;
            margin: 20px auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        .card {
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .card-header {
            background-color: #ff7f0e;
            color: white;
            padding: 10px;
            text-align: center;
        }
        .card-body {
            background-color: #1f77b4;
            padding: 10px;
            text-align: center;
            color: white;
        }
        .card-footer {
            background-color: #2ca02c;
            padding: 10px;
            text-align: center;
            color: white;
        }
        img {
            width: 100%;
            height: auto;
        }
        a {
            color: white;
            text-decoration: underline;
        }
        .filters {
            margin: 20px;
        }
        .filters label {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="filters">
        <label for="filter-parking">Parking:</label>
        <select id="filter-parking">
            <option value="all">All</option>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
        <label for="filter-category">Category:</label>
        <select id="filter-category">
            <option value="all">All</option>
            <option value="음식점">음식점</option>
            <!-- Add more categories as needed -->
        </select>
        <button id="apply-filters">Apply Filters</button>
    </div>
    <div class="container" id="data-container">
        <!-- Cards will be inserted here -->
    </div>

    <script>
        async function fetchData() {
            const response = 
                    await fetch('https://apis.data.go.kr/6260000/GoodPriceStoreService/getGoodPriceStore?serviceKey=wMPj3KtrAGElpdH4MKeC0CHjJg%2FNKvHPXd9Anmj6rjL%2Fl43xbSEbEoGGTQJOdEj6yR3XhclIs3OZtav0Lyq2Jg%3D%3D&pageNo=1&numOfRows=500&resultType=json');
            const data = await response.json();
            return data.getGoodPriceStore.body.items.item; // Adjust based on your API structure
        }

        function createCard(item) {
            const card = document.createElement('div');
            card.className = 'card';

            const header = document.createElement('div');
            header.className = 'card-header';
            header.textContent = item.sj;
            card.appendChild(header);

            const body = document.createElement('div');
            body.className = 'card-body';

            const img = document.createElement('img');
            img.src = item.imgFile1 ? `https://${item.imgFile1}` : `https://${item.imgFile2}`;
            img.alt = item.imgFile1 ? item.imgName1 : item.imgName2;
            body.appendChild(img);
            card.appendChild(body);

            const footer = document.createElement('div');
            footer.className = 'card-footer';

            const cn = document.createElement('div');
            cn.textContent = `Category: ${item.cn}`;
            footer.appendChild(cn);

            const tel = document.createElement('div');
            tel.textContent = `Tel: ${item.tel}`;
            footer.appendChild(tel);

            const adres = document.createElement('div');
            const adresLink = document.createElement('a');
            adresLink.href = '#';
            adresLink.textContent = item.adres;
            adres.appendChild(adresLink);
            footer.appendChild(adres);

            const intrcn = document.createElement('div');
            intrcn.innerHTML = item.intrcn;
            footer.appendChild(intrcn);

            card.appendChild(footer);

            return card;
        }

        function displayData(data) {
            const container = document.getElementById('data-container');
            container.innerHTML = ''; // Clear existing content
            data.forEach(item => {
                const card = createCard(item);
                container.appendChild(card);
            });
        }

        function applyFilters(data) {
            const parkingFilter = document.getElementById('filter-parking').value;
            const categoryFilter = document.getElementById('filter-category').value;

            let filteredData = data;

            if (parkingFilter !== 'all') {
                filteredData = filteredData.filter(item => item.parkngAt === parkingFilter);
            }

            if (categoryFilter !== 'all') {
                filteredData = filteredData.filter(item => item.cn === categoryFilter);
            }

            displayData(filteredData);
        }

        document.getElementById('apply-filters').addEventListener('click', () => {
            fetchData().then(data => {
                applyFilters(data);
            });
        });

        // Initial load
        fetchData().then(data => {
            displayData(data);
        });
    </script>
</body>
</html>
